# ====================================================================
# TravelMatch Environment Variables
# ====================================================================
# 
# IMPORTANT SECURITY NOTES:
# 1. NEVER commit the .env file to git (it's in .gitignore)
# 2. Copy this file to .env and fill in your actual values
# 3. Use different values for development, staging, and production
# 4. Rotate secrets every 90 days (see docs/ENVIRONMENT_SECURITY.md)
# 5. Only share secrets via secure channels (1Password, Vault, etc.)
#
# For detailed setup instructions, see: docs/ENVIRONMENT_SETUP.md
# For security best practices, see: docs/ENVIRONMENT_SECURITY.md
# ====================================================================

# --------------------------------------------------------------------
# NODE ENVIRONMENT
# --------------------------------------------------------------------
# Set to 'development', 'staging', or 'production'
NODE_ENV=development

# ====================================================================
# SUPABASE CONFIGURATION (Required)
# ====================================================================
# Get these from: https://supabase.com/dashboard/project/[project-id]/settings/api
#
# ⚠️ SECURITY LEVELS:
# - SUPABASE_URL: PUBLIC (safe to expose in client-side code)
# - SUPABASE_ANON_KEY: PUBLIC (respects Row Level Security)
# - SUPABASE_SERVICE_KEY: SECRET (bypasses RLS, server-side only!)
# --------------------------------------------------------------------

# Public Supabase URL (for mobile app)
EXPO_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co

# Public anonymous key (for mobile app - respects RLS)
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Admin panel Supabase URL (for Vite)
VITE_SUPABASE_URL=https://your-project-ref.supabase.co

# Admin panel anonymous key (for Vite)
VITE_SUPABASE_ANON_KEY=your-anon-key-here

# Service role key (SERVER-SIDE ONLY - bypasses RLS!)
# ⚠️ DANGER: Never expose this in client-side code!
# Used by: Edge Functions, video-service, backend services
SUPABASE_SERVICE_KEY=your-service-role-key-here

# Supabase Project Reference (for CLI operations)
SUPABASE_PROJECT_REF=your-project-ref

# Supabase Access Token (for CLI, deployments)
# Get from: https://supabase.com/dashboard/account/tokens
SUPABASE_ACCESS_TOKEN=your-access-token-here

# Internal Supabase URL (for server-side operations)
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase anonymous key (for server-side operations)
SUPABASE_ANON_KEY=your-anon-key-here

# Multi-region Supabase URLs (optional)
SUPABASE_URL_EU_WEST=https://eu-west.supabase.co
SUPABASE_URL_US_EAST=https://us-east.supabase.co
SUPABASE_URL_AP_SOUTHEAST=https://ap-southeast.supabase.co
SUPABASE_URL_EU_CENTRAL=https://eu-central.supabase.co

# ====================================================================
# PAYMENT SERVICES (Stripe)
# ====================================================================
# Get these from: https://dashboard.stripe.com/apikeys
#
# ⚠️ SECURITY LEVELS:
# - STRIPE_PUBLISHABLE_KEY: PUBLIC (safe for client-side)
# - STRIPE_SECRET_KEY: SECRET (server-side only!)
# - STRIPE_WEBHOOK_SECRET: SECRET (for webhook verification)
# --------------------------------------------------------------------

# Stripe publishable key (PUBLIC - safe for mobile app)
EXPO_PUBLIC_STRIPE_KEY=pk_test_your-publishable-key-here

# Stripe secret key (SECRET - server-side only!)
# ⚠️ Used by Edge Functions for payment processing
# ⚠️ NEVER use EXPO_PUBLIC_ prefix for this!
STRIPE_SECRET_KEY=sk_test_your-secret-key-here

# Stripe webhook secret (SECRET - for webhook signature verification)
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret-here

# ====================================================================
# AI SERVICES (OpenAI, Anthropic)
# ====================================================================
# ⚠️ SECURITY: These keys are SECRET - server-side only!
# Used by: Edge Functions, smart-notifications, video-service
# --------------------------------------------------------------------

# OpenAI API Key (for GPT-4, embeddings, content moderation)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Anthropic API Key (for Claude - optional)
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# ====================================================================
# VIDEO & MEDIA SERVICES (Cloudflare Stream)
# ====================================================================
# Get these from: Cloudflare Dashboard → Stream
# ⚠️ SECURITY: These are SECRET - server-side only!
# --------------------------------------------------------------------

# Cloudflare Stream API Key (SECRET - server-side only!)
CLOUDFLARE_STREAM_API_KEY=your-stream-api-key-here

# Cloudflare Stream Account ID (can be public, but keep private for security)
CLOUDFLARE_STREAM_ACCOUNT_ID=your-account-id-here

# Cloudflare API Token (SECRET - server-side only!)
CLOUDFLARE_API_TOKEN=your-api-token-here

# Cloudflare Account ID (for Images CDN - can be public but keep private)
CLOUDFLARE_ACCOUNT_ID=your-account-id-here

# Cloudflare Images API Token (SECRET - server-side only!)
# Used by Edge Functions for image upload/management
CLOUDFLARE_IMAGES_TOKEN=your-images-api-token-here

# Cloudflare Zone ID
CLOUDFLARE_ZONE_ID=your-zone-id-here

# ====================================================================
# MAPS & LOCATION SERVICES (Mapbox)
# ====================================================================
# Get from: https://account.mapbox.com
# Use a public token for client-side (embedded in bundles) and a secret
# token for server-side requests (store in Infisical / server env).
# --------------------------------------------------------------------

# Mapbox Public Token (client) - safe for embedding
EXPO_PUBLIC_MAPBOX_TOKEN=your-mapbox-public-token-here

# Mapbox Secret Token (server-side only)
MAPBOX_SECRET_TOKEN=your-mapbox-secret-token-here

# ====================================================================
# MONITORING & ANALYTICS
# ====================================================================

# --------------------------------------------------------------------
# Sentry (Error Tracking & Performance Monitoring)
# --------------------------------------------------------------------
# Get from: https://sentry.io/settings/[org]/projects/[project]/keys/

# Sentry DSN (PUBLIC - safe for client-side)
EXPO_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Sentry Auth Token (SECRET - for CLI operations, release management)
# Get from: https://sentry.io/settings/account/api/auth-tokens/
SENTRY_AUTH_TOKEN=your-sentry-auth-token-here

# Sentry Organization Slug
SENTRY_ORG=your-org-slug

# Sentry Project Name
SENTRY_PROJECT=travelmatch-mobile



# ====================================================================
# CI/CD & BUILD TOOLS
# ====================================================================

# --------------------------------------------------------------------
# Expo
# --------------------------------------------------------------------
# Get from: https://expo.dev/accounts/[account]/settings/access-tokens

# Expo Access Token (for EAS Build, deployments)
EXPO_TOKEN=your-expo-access-token-here



# --------------------------------------------------------------------
# Turbo (for monorepo caching)
# --------------------------------------------------------------------
# Get from: https://vercel.com/account/tokens

# Turbo Token (for remote caching)
TURBO_TOKEN=your-turbo-token-here

# Turbo Team ID
TURBO_TEAM=your-team-id-here

# ====================================================================
# SECURITY & COMPLIANCE
# ====================================================================

# --------------------------------------------------------------------
# Job Queue Authentication (REQUIRED for job-queue service)
# --------------------------------------------------------------------
# Generate a secure random API key using:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# ⚠️ SECURITY: This is SECRET - internal services only!
# Used by: job-queue service, Supabase Edge Functions calling job queue
JOB_QUEUE_API_KEY=your-job-queue-api-key-here

# --------------------------------------------------------------------
# Snyk (Security Scanning)
# --------------------------------------------------------------------
# Get from: https://app.snyk.io/account

SNYK_TOKEN=your-snyk-token-here







# ====================================================================
# NOTIFICATIONS
# ====================================================================

# --------------------------------------------------------------------
# Slack (Team Notifications)
# --------------------------------------------------------------------
# Get from: https://api.slack.com/apps → Incoming Webhooks

SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ====================================================================
# APPLE SERVICES (iOS Deployment)
# ====================================================================
# Get from: Apple Developer Account

# Apple ID (for App Store Connect)
APPLE_ID=your-apple-id@example.com

# App Store Connect App ID
ASC_APP_ID=your-app-id

# Apple Developer Team ID
APPLE_TEAM_ID=your-team-id

# ====================================================================
# LEGACY / OPTIONAL SERVICES
# ====================================================================

# API Configuration (Legacy - migrating to Supabase)
EXPO_PUBLIC_API_URL=http://localhost:3000/api

# WebSocket Configuration (Legacy)
EXPO_PUBLIC_SOCKET_URL=ws://localhost:3000

# Feature Flags
EXPO_PUBLIC_ENABLE_ANALYTICS=false

# ====================================================================
# DOCKER / LOCAL INFRASTRUCTURE
# ====================================================================
# These are required for docker-compose setup

# PostgreSQL Password (required for docker-compose)
# ⚠️ SECURITY: Use a strong, unique password in production!
POSTGRES_PASSWORD=your-secure-postgres-password-here
POSTGRES_USER=postgres
POSTGRES_DB=postgres

# Supabase Realtime Secret Key Base (required for docker-compose)
# ⚠️ SECURITY: Generate with: openssl rand -base64 64
REALTIME_SECRET_KEY_BASE=your-64-char-secret-key-base-here

# JWT Secret for local Supabase (required for docker-compose)
# ⚠️ SECURITY: Generate with: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-at-least-32-characters-long

# ====================================================================
# JOB QUEUE SERVICE
# ====================================================================
# Authentication for internal job queue endpoints

# Service-to-service authentication key
# ⚠️ SECURITY: Generate with: openssl rand -hex 32
JOB_QUEUE_SERVICE_KEY=your-job-queue-service-key-here

# Bull Board admin panel credentials
# ⚠️ SECURITY: Use strong credentials, especially in production!
BULL_BOARD_ADMIN_USER=admin
BULL_BOARD_ADMIN_PASSWORD=your-secure-bull-board-password-here

# Redis connection for job queue
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password-here

# ====================================================================
# DOCKER SERVICE CREDENTIALS (Required for docker-compose)
# ====================================================================
# ⚠️ SECURITY: These are REQUIRED - no defaults allowed!
# Generate strong passwords for production environments.

# MinIO (S3-compatible storage) credentials
# ⚠️ SECURITY: Generate with: openssl rand -base64 24
MINIO_ROOT_USER=your-minio-admin-user
MINIO_ROOT_PASSWORD=your-minio-secure-password-here

# Grafana admin credentials
# ⚠️ SECURITY: Generate with: openssl rand -base64 24
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-grafana-secure-password-here

# ====================================================================
# KYC VERIFICATION
# ====================================================================
# Configuration for identity verification

# KYC Mode: 'mock' (dev only), 'review' (manual), 'onfido', 'stripe_identity'
# ⚠️ WARNING: 'mock' mode only works in development environment!
KYC_MODE=review

# Onfido API Key (if KYC_MODE=onfido)
# Get from: https://dashboard.onfido.com/api-tokens
ONFIDO_API_KEY=your-onfido-api-key-here

# ====================================================================
# CORS / SECURITY
# ====================================================================
# Allowed origins for API requests (comma-separated)
# Leave empty for permissive CORS (development only!)
ALLOWED_ORIGINS=https://your-app.com,https://admin.your-app.com

# ====================================================================
# DEVELOPMENT TOOLS
# ====================================================================

# Port configurations
PORT=3000
DEV_SERVER_PORT=8081

# Debug flags
DEBUG=false
VERBOSE_LOGGING=false

# Deno environment (for edge functions)
DENO_ENV=development

# ====================================================================
# NOTES
# ====================================================================
# 
# Environment Variable Prefixes:
# - EXPO_PUBLIC_* : Exposed to React Native app (public, client-side)
# - VITE_*        : Exposed to Vite admin panel (public, client-side)
# - No prefix     : Server-side only (Edge Functions, scripts, CI/CD)
#
# Security Levels:
# - PUBLIC  : Safe to expose in client-side code (URLs, publishable keys)
# - SECRET  : Must be kept server-side only (API keys, service keys)
#
# Best Practices:
# 1. Use different keys for test/staging/production
# 2. Rotate all secrets every 90 days
# 3. Never commit .env files to git
# 4. Use environment-specific .env files (.env.production, etc.)
# 5. Store production secrets in secure vault (1Password, AWS Secrets Manager)
# 6. Restrict API keys to specific domains/platforms when possible
# 7. Monitor secret usage and revoke unused tokens
#
# For setup instructions:
# - Local development: docs/QUICK_START.md
# - Production deployment: docs/DEPLOYMENT.md
# - Security guidelines: docs/ENVIRONMENT_SECURITY.md
# ====================================================================
