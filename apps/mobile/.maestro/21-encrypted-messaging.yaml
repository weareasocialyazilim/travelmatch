appId: com.lovendo.app
---
# Encrypted Messaging E2E Test
# Tests end-to-end encryption flow for secure messaging

- launchApp
- tapOn: 'Messages'
- assertVisible: 'Your Messages'

# Start encrypted conversation
- tapOn: 'New Message'
- tapOn: 'Select User'
- tapOn:
    id: 'user-list-item-0'

# Verify encryption indicator is shown
- assertVisible:
    id: 'encryption-indicator'

# Send encrypted message
- tapOn: 'Type a message'
- inputText: 'This is a secret encrypted message!'
- tapOn: 'Send'

# Verify message sent and encrypted badge visible
- assertVisible: 'This is a secret encrypted message!'
- assertVisible:
    id: 'encrypted-badge'

# Send another encrypted message with Turkish characters
- tapOn: 'Type a message'
- inputText: 'Merhaba! Bu mesaj sifrelenmistir.'
- tapOn: 'Send'
- assertVisible: 'Merhaba! Bu mesaj sifrelenmistir.'

# Verify encryption lock icon in header
- assertVisible:
    id: 'chat-lock-icon'

# Test message decryption on receive (simulated)
- assertNotVisible: '[Sifreli mesaj]'

# Go back and verify conversation shows as encrypted
- tapOn: 'Back'
- assertVisible:
    id: 'conversation-encrypted-icon'
